<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Pemesanan - 404 SNEAKERS</title>
    <link rel="icon" href="icons8-error-50.png" type="image/png" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
   
    <style>
        
        .product-info-card {
            border-left: 4px solid #0d6efd;
        }
        .total-highlight {
            font-weight: 700;
            color: #0d6efd;
        }

        .btn-custom {
            background-color:#0d6efd!important;
            border-color: #0d6efd!important;
        }

        .btn-custom:hover {
            background-color: #0a58ca!important;
            border-color: #0a58ca!important;
        }
        input:invalid,
        select:invalid,
        textarea:invalid {
            border-color: #dc3545;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#">404 SNEAKERS</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Beranda</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="products.html">Produk</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="products-detail.html">Detail Produk</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about.html">Tentang</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Kontak</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <!-- Info Produk (Dapat dari URL) -->
                <div class="card product-info-card mb-4">
                    <div class="card-body">
                        <h4 id="productTitle">Memuat produk...</h4>
                        <div id="productDetails" class="text-muted"></div>
                    </div>
                </div>

                <!-- Form Pemesanan -->
                <div class="card shadow">
                    <div class="card-header bg-dark text-white">
                        <h4 class="mb-0"><i class="fas fa-shopping-cart me-2"></i>Formulir Pemesanan</h4>
                    </div>
                    <div class="card-body">
                        <form id="orderForm">
                            <!-- Data Produk (Hidden) -->
                            <input type="hidden" id="productId">
                            <input type="hidden" id="productPrice">
                            <input type="hidden" id="isPromo">


                            <div class="row g-3">
                                <!-- Data Pembeli -->
                                <div class="col-md-6">
                                    <label for="nama" class="form-label">Nama Lengkap*</label>
                                    <input type="text" class="form-control" id="nama" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="whatsapp" class="form-label">WhatsApp*</label>
                                    <input type="tel" class="form-control" id="whatsapp" required>
                                </div>

                                <!-- Detail Pesanan -->
                                <div class="col-md-6">
                                    <label for="size" class="form-label">Ukuran Sepatu*</label>
                                    <select class="form-select" id="size" required>
                                        <option value="" selected disabled>Pilih ukuran</option>
                                        <option value="39">39</option>
                                        <option value="40">40</option>
                                        <option value="41">41</option>
                                        <option value="42">42</option>
                                        <option value="43">43</option>
                                        <option value="44">44</option>
                                        <option value="45">45</option>
                                        <option value="46">46</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="quantity" class="form-label">Jumlah*</label>
                                    <input type="number" class="form-control" id="quantity" min="1" value="1" required>
                                </div>

                                <!-- Alamat -->
                                <div class="col-12">
                                    <label for="alamat" class="form-label">Alamat Lengkap*</label>
                                    <textarea class="form-control" id="alamat" rows="3" required></textarea>
                                </div>
                                <div class="col-md-6">
                                    <label for="payment" class="form-label">Metode Pembayaran*</label>
                                    <select class="form-select" id="payment" required>
                                        <option value="" disabled selected>Pilih metode</option>
                                        <option value="Transfer Bank">Transfer Bank</option>
                                        <option value="COD">Cash on Delivery</option>
                                    </select>
                                </div>
                                  

                                <!-- Ringkasan Pembayaran -->
                                <div class="col-12 mt-3 border-top pt-3">
                                    <h5 class="mb-3">Ringkasan Pembayaran</h5>
                                    <table class="table">
                                        <tr>
                                            <td>Subtotal:</td>
                                            <td class="text-end" id="subtotal">Rp0</td>
                                        </tr>
                                        <tr>
                                            <td>Ongkos Kirim:</td>
                                            <td class="text-end" id="ongkir">Rp15.000</td>
                                        </tr>
                                        <tr class="total-highlight">
                                            <td>Total:</td>
                                            <td class="text-end" id="total">Rp0</td>
                                        </tr>
                                    </table>
                                </div>

                                <!-- Tombol Submit -->
                                <div class="col-12 mt-4">
                                    <button type="submit" class="btn btn-custom w-100 py-2">
                                        <i class="fas fa-paper-plane me-2"></i>Konfirmasi Pesanan
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-dark text-white py-4">
        <div class="container text-center">
            <p>© 2025 404-SNEAKERS. All rights reserved.</p>
            <div class="social-links mt-3">
                <a href="https://www.facebook.com/share/19BhpVTjTx/" class="text-white me-3"><i class="fab fa-facebook-f"></i></a>
                <a href="https://www.tiktok.com/@nyzuld839?_t=ZS-8xu3I0LD0jw&_r=1" class="text-white me-3"><i class="fab fa-tiktok"></i></a>
                <a href="https://www.instagram.com/404_sneakerss?igsh=cXMzZmp5cWZubnB5" class="text-white me-3"><i class="fab fa-instagram"></i></a>
            </div>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
    <script>
        // Fungsi format Rupiah
        function formatRupiah(angka) {
            return new Intl.NumberFormat('id-ID', {
                style: 'currency',
                currency: 'IDR',
                minimumFractionDigits: 0
            }).format(angka);
        }

        // Hitung total
        function calculateTotal() {
            const basePrice = parseFloat(document.getElementById('productPrice').value) * 16000 || 0;
            const quantity = parseInt(document.getElementById('quantity').value) || 0;
            const promo = document.getElementById('isPromo').value === "true";

            let subtotal = basePrice * quantity;

         if (promo) {
            subtotal *= 0.6; // diskon 40%
        }

        const ongkir = 15000;
        const total = subtotal + ongkir;

        document.getElementById('subtotal').textContent = formatRupiah(subtotal);
        document.getElementById('total').textContent = formatRupiah(total);
        }


        // Ambil data produk dari URL saat halaman dimuat
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const productId = urlParams.get('id');
            const productNameFromUrl = urlParams.get('name');
            const productPrice = urlParams.get('price');
            const promo = urlParams.get('promo') === 'true';
            document.getElementById('isPromo').value = promo;

            
            // Tampilkan data produk
            document.getElementById('productTitle').textContent = productNameFromUrl || 'Produk Tidak Ditemukan';
            document.getElementById('productDetails').innerHTML = `
                <p class="mb-1">Harga: <strong>${formatRupiah((parseFloat(productPrice) || 0) * 16000)}</strong></p>
                <p class="mb-0">Kode Produk: ${productId || '-'}</p>
            `;
            
            // Set hidden values
            document.getElementById('productId').value = productId;
            document.getElementById('productPrice').value = productPrice;

            // Hitung awal
            calculateTotal();

            // Event listeners
            document.getElementById('quantity').addEventListener('change', calculateTotal);
            
            // Submit form
            document.getElementById('orderForm').addEventListener('submit', function(e) {
                e.preventDefault();

                const form = this;
                let isValid = true;

                // Validasi manual & beri class is-invalid
                form.querySelectorAll('input, select, textarea').forEach(field => {
                    if (!field.checkValidity()) {
                        field.classList.add('is-invalid');
                        isValid = false;
                    } else {
                        field.classList.remove('is-invalid');
                    }
                });

                if (!isValid) {
                    // Kalau tidak valid, scroll ke atas form
                    form.scrollIntoView({ behavior: 'smooth' });
                    return;
                }

                // Ambil nilai jika valid
                const nama = document.getElementById('nama').value;
                const productName = document.getElementById('productTitle').textContent;
                const total = document.getElementById('total').textContent;
                const metode = document.getElementById('payment').value;

                alert(`✅ Pesanan Berhasil!\n\nAtas Nama: ${nama}\nProduk: ${productName}\nTotal: ${total}\nPembayaran: ${metode}\n\nKami akan menghubungi via WhatsApp untuk konfirmasi.`);

                form.reset();
                calculateTotal();
            });

        });
    </script>
</body>
</html>
